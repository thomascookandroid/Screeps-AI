/**
 * Optimized check for {@link Structure.isActive}.
 * If using default getMaxLevel, you should call {@link isStructureActive.update} in your loop.
 * @author tigga 20180224
 * @param getMaxLevel optional: function to get the maximum level this controller ever got
 * @returns whether {@link Structure.isActive}
 */
export function isStructureActive(getMaxLevel = (c) => c.room.memory[maxRclKey] || 0) {
    return (s) => !s.room.controller || s.room.controller.level == getMaxLevel(s.room.controller) || s.isActive();
}
/** Write maximum controller level in Game.rooms[name].memory.#mRCL */
isStructureActive.update = function () {
    var _a;
    for (const name in Game.rooms) {
        const room = Game.rooms[name];
        const level = (_a = room.controller) === null || _a === void 0 ? void 0 : _a.level;
        if (level) {
            const memory = room.memory;
            memory[maxRclKey] = Math.max(memory[maxRclKey], level);
        }
    }
};
const maxRclKey = "#mRCL";
//# sourceMappingURL=active.js.map